<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.nextit.team1.mappers.DocumentMapper">
    <!-- document 테이블, code 테이블 조인
    where문: document 테이블의 emp_code가 주어진 comCode로 시작하는지 확인
    -->
    <select id="documentSelect" resultType="DocumentDTO">
        SELECT *
        FROM employeetest e, documenttest d
        WHERE SUBSTRING_INDEX(e.EMP_CODE ,'-', 1) = d.EMP_CODE
    </select>
    <insert id="documentInsert" parameterType="DocumentDTO">
        INSERT INTO DOCUMENTTEST (EMP_CODE, DOC_CATE_CODE, TITLE, CONTENT, FILE_NAME, FILE_ORIGIN_NAME, FILE_SIZE, FILE_PATH)
        VALUES (#{empCode}, #{docCateCode}, #{title}, #{content}, #{fileName}, #{fileOriginName}, #{fileSize}, #{filePath})
    </insert>
</mapper>